YUI.add("juicer",function(a){(function(){var b={version:"0.2.3"};this.__cache={};this.__escapehtml={__escapehash:{"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"},__escapereplace:function(c){return __escapehtml.__escapehash[c];},__escape:function(c){return typeof(c)!=="string"?c:c.replace(/[&<>"]/igm,__escapehtml.__escapereplace);},__detection:function(c){return typeof(c)==="undefined"?"":c;}};b.settings={forstart:/{@each\s*([\w\.]*?)\s*as\s*(\w*?)(,\w*?)?}/igm,forend:/{@\/each}/igm,ifstart:/{@if\s*([^}]*?)}/igm,ifend:/{@\/if}/igm,elsestart:/{@else}/igm,interpolate:/\${([\s\S]+?)}/igm,noneencode:/\$\${([\s\S]+?)}/igm,inlinecomment:/{#[^}]*?}/igm};b.template=function(){var c=this;this.__interpolate=function(e,h,f){var d=e.split("|"),g="";if(d.length>1){e=d.shift();g=d.shift();}return"<%= "+(h?"__escapehtml.__escape":"")+"("+(!f||f.detection!==false?"__escapehtml.__detection":"")+"("+g+"("+e+"))) %>";};this.__shell=function(e,d){var f=0;e=e.replace(b.settings.forstart,function(k,h,j,i){var j=j||"value",i=i&&i.substr(1);var g="i"+f++;return"<% for(var "+g+"=0,l="+h+".length;"+g+"<l;"+g+"++) {var "+j+"="+h+"["+g+"];"+(i?("var "+i+"="+g+";"):"")+" %>";}).replace(b.settings.forend,"<% } %>").replace(b.settings.ifstart,function(g,h){return"<% if("+h+") { %>";}).replace(b.settings.ifend,"<% } %>").replace(b.settings.elsestart,function(g){return"<% } else { %>";}).replace(b.settings.noneencode,function(h,g){return c.__interpolate(g,false,d);}).replace(b.settings.interpolate,function(h,g){return c.__interpolate(g,true,d);}).replace(b.settings.inlinecomment,"");if(!d||d.errorhandling!==false){e="<% try { %>"+e+'<% } catch(e) {console.warn("Juicer Render Exception: "+e.message);} %>';}return e;};this.__pure=function(e,d){if(d&&d.loose===true){buf=this.__looseconvert(e,!d||d.strip);}else{buf=this.__convert(e,!d||d.strip);}return buf;};this.__convert=function(e,f){var d=[].join("");d+="var data=data||{};";d+="var out='';out+='";if(f){d+=e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';out+=$1;out+='").split("<%").join("';").split("%>").join("out+='")+"';return out;";}else{d+=e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<%=(.+?)%>/g,"';out+=$1;out+='").split("<%").join("';").split("%>").join("out+='")+"';return out.replace(/[\\r\\n]\\t+[\\r\\n]/g,'\\r\\n');";}return d;};this.__looseconvert=function(e,f){var d=[].join("");d+="var data=data||{};";d+="var p=[];";if(f){d+="with(data) {p.push('"+e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');};return p.join('');";}else{d+="with(data) {p.push('"+e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');};return p.join('').replace(/[\\r\\n]\\t+[\\r\\n]/g,'\\r\\n');";}return d;};this.parse=function(e,d){e=this.__shell(e,d);e=this.__pure(e,d);this.render=new Function("data",e);return this;};};b.compile=function(d,c){try{var f=__cache[d]?__cache[d]:new this.template().parse(d,c);if(!c||c.cache!==false){__cache[d]=f;}return f;}catch(g){console.warn("Juicer Compile Exception: "+g.message);return{render:function(){}};}};b.to_html=function(d,e,c){return this.compile(d,c).render(e);};a.juicer=b;})();},"0.2.3");